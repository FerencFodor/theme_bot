"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Permission = void 0;
const __1 = require("../..");
const DDiscord_1 = require("../classes/DDiscord");
const DSlash_1 = require("../classes/DSlash");
function Permission(id, type) {
    const permission = {
        id,
        type
    };
    return async (target, key, descriptor) => {
        __1.MetadataStorage.instance.addModifier(__1.Modifier.create(async (original) => {
            original.defaultPermission = false;
            original.permissions = [...original.permissions, permission];
            if (original instanceof DDiscord_1.DDiscord) {
                original.slashes.map((slash) => {
                    slash.defaultPermission = false;
                    slash.permissions = [...slash.permissions, permission];
                });
            }
        }, DSlash_1.DSlash, DDiscord_1.DDiscord).decorateUnknown(target, key, descriptor));
    };
}
exports.Permission = Permission;
//# sourceMappingURL=Permission.js.map